import MangaViewer from "#/index";

describe("mangaViewer class test", () => {
  const rootEl = document.createElement("div");
  rootEl.id = "testViewer";
  document.body.appendChild(rootEl);
  const testPics = [
    "test0.png",
    "test1.png",
    "test2.png",
  ]
  const viewer = new MangaViewer("#testViewer", testPics, {
    pageWidth: 600,
    pageHeight: 800,
  })
  it("open & close test", () => {
    const rootEl = viewer.el.rootEl;
    expect(location.hash).not.toMatch(/#.+/);
    viewer.open();

    expect(location.hash).toMatch(/#.+/);
    expect(rootEl.style.opacity).toBe("1");
    expect(rootEl.style.visibility).toBe("visible");
    expect(document.documentElement.style.overflowY).toBe("hidden");
    expect(document.body.style.overflowY).toBe("hidden");

    viewer.close();
    expect(location.hash).not.toMatch(/#.+/);
    expect(rootEl.style.opacity).toBe("");
    expect(rootEl.style.visibility).toBe("");
    expect(document.documentElement.style.overflowY).toBe("");
    expect(document.body.style.overflowY).toBe("");
  })
})
